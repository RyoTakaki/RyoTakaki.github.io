<!DOCTYPE html>
<html>

<head>
    <title>Narrative Visualization</title>

    <!-- Ref: https://www.wabiapp.com/WabiSampleSource/html5/contents_change_disp_none.html -->
    <style>
        .page {
            display: none;
        }

        .active {
            display: block;
        }

        circle {
            fill: lightblue;
            stroke: black;
        }
    </style>

</head>

<body onload="init1(), init2(), init3()">

    <div class="page active" id="page1">
        <h1>Page 1</h1>
        <button onclick="change_page(2)">Next</button>
        <svg id="svg1"></svg>
        <script>
            async function init1() {
                // Reference: https://d3-graph-gallery.com/graph/barplot_horizontal.html
                const data = await d3.csv("https://RyoTakaki.github.io/Learning_time.csv");
                console.log(data);
                var width = 800; var height = 500; var margin = 150;
                var xs = d3.scaleLinear().domain([10, 150]).range([0, width]);
                var ys = d3.scaleLinear().domain([10, 150]).range([height, 0]);
                d3.select("#svg1")
                    .attr("width", width + 2 * margin)
                    .attr("height", height + 2 * margin)
                    .append("g")
                    .attr("transform", "translate(" + margin + "," + margin + ")")
                    .selectAll()
                    .data(data)
                    .enter()
                    .append("rect")
                    .attr("x", xs(0))
                    .attr("y", function(d) { return ys(d.Course);})
                    .attr("width", function(d) { return xs(d.Total_hour) })
                d3.select("#svg1")
                    .append("g")
                    .attr("transform", "translate(" + margin + "," + margin + ")")
                    .call(d3.axisLeft(ys)
                        .tickValues([10, 20, 50, 100])
                        .tickFormat(d3.format("~s")));
                d3.select("#svg1")
                    .append("g")
                    .attr("transform", "translate(" + margin + "," + (height + margin) + ")")
                    .call(d3.axisBottom(xs)
                        .tickValues([10, 20, 50, 100])
                        .tickFormat(d3.format("~s")));
            }
        </script>
    </div>

    <div class="page" id="page2">
        <h1>Page 2</h1>
        <button onclick="change_page(1)">Prev...</button>
        <button onclick="change_page(3)">Next</button>
        <svg id="svg2"></svg>
        <script>
            async function init2() {
                const data = await d3.csv("https://flunky.github.io/cars2017.csv");
                console.log(data);
                var width = 800; var height = 500; var margin = 150;
                var xs = d3.scaleLog().domain([10, 150]).range([0, width]);
                var ys = d3.scaleLog().domain([10, 150]).range([height, 0]);
                d3.select("#svg2")
                    .attr("width", width + 2 * margin)
                    .attr("height", height + 2 * margin)
                    .append("g")
                    .attr("transform", "translate(" + margin + "," + margin + ")")
                    .selectAll()
                    .data(data)
                    .enter()
                    .append("circle")
                    .attr("cx", function (d, i) { return xs(d.AverageCityMPG) })
                    .attr("cy", function (d, i) { return ys(Number(d.AverageHighwayMPG)) })
                    .attr("r", function (d, i) { return 2 + Number(d.EngineCylinders) });
                d3.select("#svg2")
                    .append("g")
                    .attr("transform", "translate(" + margin + "," + margin + ")")
                    .call(d3.axisLeft(ys)
                        .tickValues([10, 20, 50, 100])
                        .tickFormat(d3.format("~s")));
                d3.select("#svg2")
                    .append("g")
                    .attr("transform", "translate(" + margin + "," + (height + margin) + ")")
                    .call(d3.axisBottom(xs)
                        .tickValues([10, 20, 50, 100])
                        .tickFormat(d3.format("~s")));
            }
        </script>
    </div>

    <div class="page" id="page3">
        <h1>Page 3</h1>
        <button onclick="change_page(2)">Prev.</button>
        <svg id="svg3"></svg>
        <script>
            async function init3() {
                const data = await d3.csv("https://flunky.github.io/cars2017.csv");
                console.log(data);
                var width = 800; var height = 500; var margin = 150;
                var xs = d3.scaleLog().domain([10, 150]).range([0, width]);
                var ys = d3.scaleLog().domain([10, 150]).range([height, 0]);
                d3.select("#svg3")
                    .attr("width", width + 2 * margin)
                    .attr("height", height + 2 * margin)
                    .append("g")
                    .attr("transform", "translate(" + margin + "," + margin + ")")
                    .selectAll()
                    .data(data)
                    .enter()
                    .append("circle")
                    .attr("cx", function (d, i) { return xs(d.AverageCityMPG) })
                    .attr("cy", function (d, i) { return ys(Number(d.AverageHighwayMPG)) })
                    .attr("r", function (d, i) { return 2 + Number(d.EngineCylinders) });
                d3.select("#svg3")
                    .append("g")
                    .attr("transform", "translate(" + margin + "," + margin + ")")
                    .call(d3.axisLeft(ys)
                        .tickValues([10, 20, 50, 100])
                        .tickFormat(d3.format("~s")));
                d3.select("#svg3")
                    .append("g")
                    .attr("transform", "translate(" + margin + "," + (height + margin) + ")")
                    .call(d3.axisBottom(xs)
                        .tickValues([10, 20, 50, 100])
                        .tickFormat(d3.format("~s")));
            }
        </script>
    </div>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script>

        function change_page(page_num) {
            // Hide all pages
            d3.selectAll(".page").classed("active", false);

            // Only show the selected page
            d3.select("#page" + page_num).classed("active", true);
        }
    </script>
</body>

</html>